DECLARE

	PROCEDURE INSTALAR_DARK_SOULS IS 
		C1 SYS_REFCURSOR;
		TYPE V_C1 IS TABLE OF C1%ROWTYPE;
		BEGIN
			OPEN C1 FOR (SELECT DARK.ROWID ID_ORACLE, DARK.* FROM DARK_SOULS DARK);
			LOOP
				FETCH C1 BULK COLLECT INTO P1;

				FORALL I IN 1..P1.LAST
					UPDATE  CARPETA_DESTINO
					   SET  SUBCARPETA = P1(I).COLUMNA	
					 WHERE	ROWID = P1(I).ID_ORACLE; 
			END LOOP;
			CLOSE C1;
			COMMIT;
		END;


	FUNCTION ABRIR_DARK_SOULS RETURN BOOLEAN
		IS
		BEGIN
			IF DARK_SOULS EXIST 
				THEN
					RETURN TRUE;
				ELSE
					RETURN FALSE;
			END IF;
		END;


	FUNCTION CONFIGURAR_DARK_SOULS IS 
		C1 SYS_REFCURSOR;
		V_C1 IS TABLE OF CARPETA_DESTINO%ROWTYPE;
		BEGIN
			OPEN C1 FOR (SELECT CAR.ROWID ID_ORACLE, CAR.* FROM CARPETA_DESTINO CAR);
			LOOP
				FETCH C1 BULK COLLECT INTO V_C1;

				FORALL I IN 1..V_C1.LAST
					UPDATE  CARPETA_DESTINO
					   SET  SUBCARPETA = V_C1(I).SUBCARPETA
					 WHERE	ROWID = V_C1(I).ID_ORACLE;
			END LOOP;
			CLOSE C1;
			COMMIT;
		END;


	FUNCTION PROBAR_DARK_SOULS (C1 SYS_REFCURSOR) RETURN BOOLEAN
		TYPE V_C1 IS TABLE OF DARK_SOULS%ROWTYPE;
		BEGIN
			OPEN C1 FOR (SELECT * FROM DARK_SOULS);
			FETCH C1 BULK COLLECT INTO V_C1;
			IF (V_C1 IS NOT NULL) 	
				THEN
					RETURN TRUE;
				ELSE 
					RETURN FALSE;
			END IF; 
		END; 

	FUNCTION JUGAR_DARK_SOULS RETURN NUMBER
		IS
		TYPE JUGAR IS TABLE OF DARK_SOULS%ROWTYPE;
		EXPERIENCIA_JUGANDO_DARK_SOULS NUMBER;
		BEGIN
			BEGIN
				SELECT * BULK COLLECT INTO JUGAR
				  FROM DARK_SOULS;
			EXCEPTION 
				WHEN OTHERS THEN
					JUGAR = NULL; 
			END;
			IF JUGAR IS NOT NULL 
				THEN 
					RETURN JUGAR.COUNT;
				ELSE
					RETURN 0;
			END IF;
		END; 

	FUNCTION PERDER_DARK_SOULS RETURN BOOLEAN
		IS 
		BEGIN
			RETURN FALSE;
		END;

	FUNCTION PERDER_DARK_SOULS RETURN BOOLEAN
		IS 
		BEGIN
			RETURN TRUE;
		END;


	FUNCTION TERMINAR_DARK_SOULS RETURN BOOLEAN
		IS 
		BEGIN
			DROP TABLE DARK_SOULS;
			RETURN TRUE;
		END;

BEGIN
	INSTALAR_DARK_SOULS;	--PASO 1
	CONFIGURAR_DARK_SOULS;	--PASO 2
	ABRIR_DARK_SOULS;		--PASO 3
	PROBAR_DARK_SOULS;		--PASO 4
	JUGAR_DARK_SOULS;		--PASO 5
	PERDER_DARK_SOULS;		--PASO 6
	GANAR_DARK_SOULS;		--PASO 7
	TERMINAR_DARK_SOULS;	--PASO 8
END;